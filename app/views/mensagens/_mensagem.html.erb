<% pode_gerenciar = mensagem.sala.admin?(current_usuario) || mensagem.usuario_id == current_usuario.id %>
<%= turbo_frame_tag "mensagem_#{mensagem.id}", class: 'rounded-2xl border border-white/5 bg-slate-900/60 px-4 py-3 flex justify-between items-center gap-3 shadow-lg shadow-slate-900/40' do %>
  <div class="flex flex-col">
    <div class="flex items-center gap-2">
      <span class="text-xs font-semibold text-white"><%= mensagem.usuario.email %></span>
      <span class="text-[11px] text-slate-400"><%= mensagem.created_at.strftime('%d/%m %H:%M') %></span>
    </div>
    <span class="text-sm text-slate-200"><%= mensagem.conteudo %></span>
  </div>

  <% if pode_gerenciar %>
    <div class="flex gap-2">
      <%= link_to edit_sala_mensagem_path(mensagem.sala, mensagem), class:'text-[11px] font-semibold bg-slate-800 text-white py-1 px-3 rounded-lg border border-white/10 hover:border-sky-400' do %>
        Editar
      <% end %>
      <%= button_to sala_mensagem_path(mensagem.sala, mensagem), class:'text-[11px] font-semibold bg-red-600 text-white py-1 px-3 rounded-lg hover:bg-red-500', method: :delete do %>
        Apagar
      <% end %>
    </div>
  <% end %>
<% end %>
